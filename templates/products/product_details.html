{% extends 'base_frontend.html' %}
{% load static %}
{% load humanize %}


{% block title %}
    {{ product.title }}
{% endblock %}

{% block frontend_content %}
    <div class="ph-page-wrapper ph-single-product">
        <main class="ph-main-content">
            <div class="ph-content-entry">
                <div class="ph-single-product-container">
                    <div class="container">
                        <div class="ph-single-product-top-wrapper">
                            <div class="row">
                                <div class="col-12 col-md-5">
                                    <div class="ph-single-product-image-wrapper">
                                        <div class="ph-single-product-main-image">
                                            <a class="image-popup-vertical-fit"
                                               href="{% get_media_prefix %}{{ product.media.get_primary.file }}"
                                               title="{{ product.title }}">
                                                <img class="ph-border-radius"
                                                     src="{% get_media_prefix %}{{ product.media.get_primary.file }}">
                                            </a>
                                        </div><!-- .ph-single-product-main-image -->
                                        <div class="ph-single-product-gallery popup-gallery">
                                            {% for image in product.media.get_additional %}
                                                <a href="{% get_media_prefix %}{{ image.file }}"
                                                   title="{{ product.title }}">
                                                    <img class="ph-border-radius-small"
                                                         src="{% get_media_prefix %}{{ image.file }}">
                                                </a>
                                            {% endfor %}
                                        </div><!-- .ph-single-product-gallery -->
                                    </div><!-- .ph-single-product-image-wrapper -->
                                </div><!-- .col-md-5 -->
                                <div class="col-12 col-md-7">
                                    <div class="ph-single-product-details-wrapper">
                                        <h1 class="ph-single-product-title">{{ product.title }}</h1>
                                        <hr>
                                        <div class="ph-single-product-base-price my-3">
                                            <label class="ph-single-product-label"
                                                   for="product_base_price">قیمت: </label>
                                            {% with product.get_price as price %}
                                                <h3 id="product_base_price" class="ph-single-product-price">
                                                    <span>{{ price.value }}</span>
                                                    <span>{{ price.attribute.unit }}</span> <span
                                                        class="ph-product-small-text">به ازای هر</span><span
                                                        class="ph-product-small-text">تن</span></h3>
                                            {% endwith %}
                                        </div><!-- .ph-single-product-base-price -->
                                        <div class="ph-single-product-atts-summary">
                                            <ul>
                                                <li>
                                                    <label>نوع:</label>
                                                    <span>{{ product.category.parent.title }}</span>
                                                </li>
                                                <li>
                                                    <label>دسته بندی:</label>
                                                    <a href="#">{{ product.category.title }}</a>
                                                </li>
                                                <li>
                                                    <label>استان :</label>
                                                    <a href="#">{{ product.user.region }}</a>
                                                </li>
                                                <li>
                                                    <label>نوع بسته بندی :</label>
                                                    <span>کیسه 25 کیلو گرمی</span>
                                                </li>
                                                <li>
                                                    <label>خلوص عیار :</label>
                                                    <span>%92-90</span>
                                                </li>
                                            </ul>
                                        </div>
                                        <div class="ph-single-product-details-bottom">
                                            <div class="ph-single-product-calculator my-3">
                                                <p>برای محاسبه قیمت نهایی، مقدار مورد نیاز را وارد نمایید:</p>
                                                <div class="ph-single-product-quantity mb-3">
                                                    <input type="number" value="1">
                                                    <span>تن</span>
                                                </div><!-- .ph-single-product-quantity -->
                                                <div class="ph-single-product-final-price">
                                                    <label class="ph-single-product-label" for="product_final_price">قیمت
                                                        نهایی: </label>
                                                    <h3 id="product_final_price"><span>760.000</span> <span>تومان</span>
                                                    </h3>
                                                </div><!-- .ph-single-product-final-price -->
                                            </div><!-- .ph-single-product-calculator -->
                                            <div class="ph-single-product-cta my-3">
                                                <a href="#" class="ph-submit-order-btn ph-border-radius"><i
                                                        class="far fa-check-circle ml-2"></i> ثبت سفارش </a>
                                                <a href="#" class="ph-need-sample-btn ph-border-radius"><i
                                                        class="fas fa-vial ml-2"></i> درخواست نمونه </a>
                                            </div><!-- .ph-single-product-cta -->
                                        </div><!-- .ph-single-product-details-bottom -->
                                    </div><!-- .ph-single-product-details-wrapper -->
                                </div><!-- .col-md-7 -->
                            </div><!-- .row -->
                        </div><!-- .ph-single-product-top-wrapper -->
                        <div class="ph-single-product-specification ph-border-radius my-4">
                            <div class="row">
                                <div class="col-12 col-md-5">
                                    <div class="ph-single-product-specification-table">
                                        <h3>مشخصات محصول</h3>
                                        <ul>
                                            {% for product_attribute in product.attributes.get_ordinary %}
                                                <li>
                                                    {% with product_attribute.attribute as attribute_definition %}
                                                        <label>{{ attribute_definition.title }}: </label>
                                                        {% if attribute_definition.value_type == 'bool' %}
                                                            <span>{{ product_attribute.value|yesno:'دارد,ندارد' }}</span>
                                                        {% elif attribute_definition.value_type == 'int' %}
                                                            <span>{{ product_attribute.value|intcomma }}</span>
                                                        {% else %}
                                                            <span>{{ product_attribute.value }} {{ attribute_definition.unit }}</span>
                                                        {% endif %}
                                                    {% endwith %}
                                                </li>
                                            {% endfor %}
                                        </ul>
                                    </div>
                                </div>
                                <div class="col-12 col-md-7">
                                    <div class="ph-single-product-analyze-image">
                                        <a class="image-popup-fit-width"
                                           href="{% get_media_prefix %}{{ product.get_analyze.value }}" title="{{ product.title }}">
                                            <img src="{% get_media_prefix %}{{ product.get_analyze.value }}" alt="">
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="ph-single-product-process-container my-4">
                            <img src="{% static 'images/process.jpg' %}" class="ph-border-radius" alt="">
                        </div>
                    </div><!-- .container -->
                </div><!-- .ph-single-product-container -->
            </div><!-- .ph-content-entry -->
        </main><!-- .ph-main-content -->
    </div><!-- .ph-page-wrapper -->
{% endblock %}

