{% extends 'base_admin.html' %}
{% load static %}



{% block admin_content %}
    <main class="ph-dashboard-main ph-logistic-panel ph-logistic-profile">
        <div class="container">
            <form action="" id="ph_logistic_profile_form" role="form">
                <div id="ph_logistic_profile_page" class="ph-logistic-profile-page form-group">
                    <div class="ph-logistic-profile-panel ph-tabs">
                        <div class="ph-lpp-tab-navs ph-tab-navs ph-border-radius bg-color-2 ph-box-shadow mb-3">

                            <ul class="nav nav-pills nav-fill">
                                <li class="nav-item">
                                    <a class="nav-item nav-link active" id="nav-businessinfo-tab" data-toggle="tab"
                                       href="#nav-businessinfo" role="tab" aria-controls="nav-businessinfo"
                                       aria-selected="true">اطلاعات فروشنده</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-item nav-link" id="nav-bankinfo-tab" data-toggle="tab"
                                       href="#nav-bankinfo" role="tab" aria-controls="nav-bankinfo"
                                       aria-selected="false">اطلاعات بانکی</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-item nav-link" id="nav-contact-tab" data-toggle="tab"
                                       href="#nav-contact" role="tab" aria-controls="nav-contact" aria-selected="false">اطلاعات
                                        تماس و آدرس‌ها</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-item nav-link" id="nav-contract-tab" data-toggle="tab"
                                       href="#nav-contract" role="tab" aria-controls="nav-contract"
                                       aria-selected="false">اطلاعات قرارداد</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-item nav-link" id="nav-documents-tab" data-toggle="tab"
                                       href="#nav-documents" role="tab" aria-controls="nav-documents"
                                       aria-selected="false">بارگذاری مدارک</a>
                                </li>
                            </ul>
                        </div>
                        <!-- ph-lpp-tab-navs ph-tab-navs -->

                        <div id="nav-tabContent" class="ph-lpp-tab-contents ph-tab-contents tab-content">

                            <div class="tab-pane fade show active" id="nav-businessinfo" role="tabpanel"
                                 aria-labelledby="nav-businessinfo-tab">
                                <div class="ph-tc-wrapper">
                                    <div class="ph-tcw-content ph-border-radius bg-light ph-box-shadow mb-3">
                                        <div class="ph-panel-title">
                                            <span class="title">اطلاعات باربری</span>
                                            <a href="#" data-toggle="modal" data-target="#ph_edit_profile_"
                                               class="edit-info ph-btn"><i class="fas fa-pencil-alt"></i>درخواست ویرایش</a>
                                        </div>
                                        <div class="form-row align-items-center">
                                            <div class="form-group col-4 my-1">
                                                <label for="id">کد کاربر</label>
                                                <input type="text" readonly class="form-control" id="id"
                                                       value="{{ user.pk }}">
                                            </div>
                                            <div class="form-group col-4 my-1">
                                                <label for="type">نوع کاربر</label>
                                                <input type="text" readonly class="form-control" id="type"
                                                       value="{{ user.get_legal_type_display }}">
                                            </div>
                                            <div class="form-group col-4 my-1">
                                                <label for="company_name">نام شرکت</label>
                                                <input type="text" readonly class="form-control" id="company_name"
                                                       value="{{ user.profile.company_name }}">
                                            </div>
                                            <div class="form-group col-4 my-1">
                                                <label for="first_name">نام</label>
                                                <input type="text" readonly class="form-control" id="first_name"
                                                       value="{{ user.profile.first_name }}">
                                            </div>
                                            <div class="form-group col-4 my-1">
                                                <label for="last_name">نام خانوادگی</label>
                                                <input type="text" readonly class="form-control" id="last_name"
                                                       value="{{ user.profile.last_name }}">
                                            </div>
                                            <div class="form-group col-4 my-1">
                                                <label for="national_code">کد ملی</label>
                                                <input type="text" readonly class="form-control" id="national_code"
                                                       value="{{ user.profile.national_code }}">
                                            </div>
                                            <div class="form-group col-4 my-1">
                                                <label for="id_code">شماره شناسنامه</label>
                                                <input type="text" readonly class="form-control" id="id_code"
                                                       value="{{ user.profile.id_code }}">
                                            </div>
                                            <div class="form-group col-4 my-1">
                                                <label for="license_type">نوع پروانه</label>
                                                <input type="text" readonly class="form-control" id="license_type"
                                                       value="{{ user.profile.get_company_license_type_display }}">
                                            </div>
                                            <div class="form-group col-4 my-1">
                                                <label for="license_number">شماره پروانه</label>
                                                <input type="text" readonly class="form-control" id="license_number"
                                                       value="{{ user.profile.company_license_number }}">
                                            </div>
                                            <div class="form-group col-4 my-1">
                                                <label for="license_start">تاریخ شروع اعتبار</label>
                                                <input type="text" readonly class="form-control" id="license_start"
                                                       value="{{ user.profile.get_persian_company_license_start }}">
                                            </div>
                                            <div class="form-group col-4 my-1">
                                                <label for="license_end">تاریخ پایان اعتبار</label>
                                                <input type="text" readonly class="form-control" id="license_end"
                                                       value="{{ user.profile.get_persian_company_license_end }}">
                                            </div>
                                            <div class="form-group col-4 my-1">
                                                <label for="id_code">نام مدیر عامل</label>
                                                <input type="text" readonly class="form-control" id="id_code"
                                                       value="{{ user.profile.company_ceo_name }}">
                                            </div>
                                            <div class="form-group col-4 my-1">
                                                <label for="id_code">شماره شناسنامه مدیر عامل</label>
                                                <input type="text" readonly class="form-control" id="id_code"
                                                       value="{{ user.profile.company_ceo_id_code }}">
                                            </div>
                                            <div class="form-group col-4 my-1">
                                                <label for="id_code">کد ملی مدیر عامل</label>
                                                <input type="text" readonly class="form-control" id="id_code"
                                                       value="{{ user.profile.company_ceo_national_code }}">
                                            </div>
                                            <div class="form-group col-4 my-1">
                                                <label for="id_code">نوع شعبه</label>
                                                <input type="text" readonly class="form-control" id="id_code"
                                                       value="{{ user.profile.get_company_branch_type_display }}">
                                            </div>
                                        </div>
                                        <!-- form-row -->
                                    </div>
                                    <!-- ph-tcw-content -->
                                </div>
                                <!-- ph-tc-wrapper -->
                            </div>
                            <!-- tab-pane fade #nav-businessinfo -->

                            <div class="tab-pane fade" id="nav-bankinfo" role="tabpanel"
                                 aria-labelledby="nav-bankinfo-tab">
                                <div class="ph-tc-wrapper">
                                    <div class="ph-tcw-content ph-border-radius bg-light ph-box-shadow mb-3">
                                        <div class="ph-panel-title">
                                            <span class="title">اطلاعات حساب بانکی</span>
                                        </div>
                                        <div class="form-row align-items-center">
                                            <div class="form-group col-4 my-1">
                                                <label for="12">نام صاحب حساب شرکت</label>
                                                <input type="text" readonly class="form-control text-left" id="12"
                                                       value="{{ user.profile.bank_account_name }}">
                                            </div>
                                            <div class="form-group col-4 my-1">
                                                <label for="12">شماره حساب بانکی</label>
                                                <input type="text" readonly class="form-control text-left" id="12"
                                                       value="{{ user.profile.bank_account_number }}">
                                            </div>
                                            <div class="form-group col-4 my-1">
                                                <label for="11">شماره شبا</label>
                                                <input type="text" readonly class="form-control" id="11"
                                                       value="{{ user.profile.bank_sheba_number }}">
                                            </div>
                                        </div>
                                        <!-- form-row -->
                                        <a href="#" data-toggle="modal" data-target="#ph_edit_profile_"
                                           class="edit-info ph-btn"><i class="fas fa-pencil-alt"></i>درخواست ویرایش</a>
                                    </div>
                                    <!-- ph-tcw-content -->
                                </div>
                                <!-- ph-tc-wrapper -->
                            </div>
                            <!-- tab-pane fade #nav-bankinfo -->

                            <div class="tab-pane fade" id="nav-contact" role="tabpanel"
                                 aria-labelledby="nav-contact-tab">
                                <div class="ph-tc-wrapper">
                                    <div class="ph-tcw-content ph-border-radius bg-light ph-box-shadow mb-3">
                                        <div class="ph-panel-title">
                                            <span class="title">اطلاعات تماس و آدرس فروشنده</span>
                                        </div>
                                        <div class="form-row align-items-center">
                                            <div class="form-group col-4 my-1">
                                                <label for="13">ایمیل</label>
                                                <input type="email" readonly class="form-control text-left" id="13"
                                                       value="{{ user.email }}">
                                            </div>
                                            <div class="form-group col-4 my-1">
                                                <label for="14">تلفن همراه</label>
                                                <input type="number" readonly class="form-control text-left" id="14"
                                                       value="{{ user.mobile_number }}">
                                            </div>
                                            <div class="form-group col-4 my-1">
                                                <label for="province">استان</label>
                                                <input type="text" readonly class="form-control text-left" id="province"
                                                       value="{{ user.profile.region.parent.title }}">
                                            </div>
                                            <div class="form-group col-4 my-1">
                                                <label for="city">شهر</label>
                                                <input type="text" readonly class="form-control text-left" id="city"
                                                       value="{{ user.profile.region.title }}">
                                            </div>
                                            <div class="form-group col-12 my-1">
                                                <label for="address">آدرس</label>
                                                <input type="text" readonly class="form-control" id="address"
                                                       value="{{ user.profile.address }}">
                                            </div>
                                            <div class="form-group col-4 my-1">
                                                <label for="postal_code">کد پستی</label>
                                                <input type="number" readonly class="form-control text-left" id="postal_code"
                                                       value="{{ user.profile.postal_code }}">
                                            </div>
                                            <div class="form-group col-4 my-1">
                                                <label for="20">تلفن ثابت</label>
                                                <input type="number" readonly class="form-control text-left" id="20"
                                                       value="{{ user.profile.phone_number }}">
                                            </div>
                                        </div>
                                        <!-- form-row -->
                                        <a href="#" data-toggle="modal" data-target="#ph_edit_profile_"
                                           class="edit-info ph-btn"><i class="fas fa-pencil-alt"></i>درخواست ویرایش</a>
                                    </div>
                                    <!-- ph-tcw-content -->
                                </div>
                            </div>
                            <div class="tab-pane fade" id="nav-contract" role="tabpanel"
                                 aria-labelledby="nav-contract-tab">
                                <div class="ph-tc-wrapper">
                                    <div class="ph-tcw-content ph-border-radius bg-light ph-box-shadow mb-3">
                                        <div class="ph-panel-title">
                                            <span class="title">اطلاعات قرارداد</span>
                                            <a href="#" class="edit-info ph-btn">ثبت</a>
                                        </div>
                                        <div class="ph-tcw-download">
                                            <p>متن قرارداد را دانلود نمایید و بعد از امضا در جدول زیر بارگذاری
                                                کنید</p>
                                            <a href="#" class="ph-btn ph-download"><i
                                                    class="fas fa-download"></i>دانلود
                                                قرارداد</a>
                                        </div>
                                        <div class="form-row ph-tcw-upload align-items-center">
                                            <div class="ph-order-img-upload">
                                                <div class="ph-spm-create-product-img-up">
                                                    <div class="row">
                                                        <div class="col-3 col-md-2 imgUp">
                                                            <div class="imagePreview"></div>
                                                            <label><input class="image-name-3" type="text"
                                                                          readonly></label>
                                                            <label class="btn ph-spm-create-product-img-up-btn">
                                                                آپلود
                                                                <input type="file"
                                                                       class="uploadFile img upload-btn-3"
                                                                       value="Upload Photo"
                                                                       style="width: 0px;height: 0px;overflow: hidden;">
                                                            </label>
                                                        </div>
                                                        <!-- col-4 col-md-3 -->
                                                        <i class="fa fa-plus imgAdd"></i>
                                                    </div>
                                                    <!-- row -->
                                                </div>
                                            </div>
                                            <!-- ph-order-img-upload -->

                                        </div>
                                        <!-- form-row -->
                                    </div>
                                    <!-- ph-tcw-content -->
                                </div>
                                <!-- ph-tc-wrapper -->
                            </div>
                            <!-- tab-pane fade #nav-contract -->
                            <div class="tab-pane fade" id="nav-documents" role="tabpanel"
                                 aria-labelledby="nav-documents-tab">
                                <div class="ph-tc-wrapper">
                                    <div class="ph-tcw-content ph-border-radius bg-light ph-box-shadow mb-3">
                                        <div class="ph-panel-title">
                                            <span class="title">بارگذاری مدارک</span>
                                        </div>
                                        <table class="ph-table table table-bordered text-center">
                                            <thead class="thead-dark">
                                            <tr>
                                                <th scope="col">ردیف</th>
                                                <th scope="col">تصویر مدرک</th>
                                                <th scope="col">عنوان مدرک</th>
                                                <th scope="col">وضعیت</th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr>
                                                <th scope="row">۱</th>
                                                <td><img src="{% get_media_prefix %}{{ user.get_image_id_card_front.file }}" alt=""></td>
                                                <td>{{ user.get_image_id_card_front.title }}</td>
                                                <td>{{ user.get_image_id_card_front.get_state_display }}</td>
                                            </tr>
                                            <tr>
                                                <th scope="row">۲</th>
                                                <td><img src="{% get_media_prefix %}{{ user.get_image_id_card_back.file }}" alt=""></td>
                                                <td>{{ user.get_image_id_card_back.title }}</td>
                                                <td>{{ user.get_image_id_card_back.get_state_display }}</td>
                                            </tr>
                                            <tr>
                                                <th scope="row">۲</th>
                                                <td><img src="{% get_media_prefix %}{{ user.get_image_company_license.file }}" alt=""></td>
                                                <td>{{ user.get_image_company_license.title }}</td>
                                                <td>{{ user.get_image_company_license.get_state_display }}</td>
                                            </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                    <!-- ph-tcw-content -->
                                </div>
                                <!-- ph-tc-wrapper -->
                            </div>
                            <!-- tab-pane fade #nav-documents -->
                        </div>
                        <!-- ph-lpp-tab-contents -->
                    </div>
                    <!-- ph-logistic-profile-panel -->
                </div>
                <!-- ph-logistic-profile-page -->

            </form>
            <!-- #ph_logistic_profile_form -->

        </div>
        <!-- container -->

    </main>
    <!-- ph-logistic-profile -->
    <!-- Edit ph_edit_profile_ ------------------------------------------->
    <div class="modal fade ph-modal ph-auction-modal" id="ph_edit_profile_" tabindex="-1" role="dialog"
         aria-labelledby="auction_modal" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLongTitle">درخواست ویرایش</h5>
                    <button type="button" class="close" data-dismiss="modal"
                            aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div><!-- .modal-header -->
                <div class="modal-body">
                    <div class="ph-qc-section">
                        <div class="ph-qc-alarm">
                            <p>در اینجا متن درخواست خود را بنویسید.</p>
                        </div>
                        <!-- ph-qc-alarm -->
                        <div class="ph-qc-description">
                            <textarea class="form-control" id="" rows="5"
                                      placeholder="تقاضای ویرایش..."></textarea>
                        </div>
                        <!-- ph-qc-description -->
                        <div class="ph-qc-info-btns">
                            <a href="#" class="ph-btn ph-denied-btn">
                                <span>ارسال درخواست</span>
                            </a>
                        </div>
                        <!-- ph-qc-info-btns -->
                    </div>
                    <!-- ph-qc-section -->
                </div><!-- .modal-body -->
            </div><!-- .modal-content -->
        </div><!-- .modal-dialog -->
    </div><!-- modal#ph_edit_profile_ -->

{% endblock %}

{% block footer_static %}
    <script>
        $('.extra-fields-customer').click(function () {
            $('.customer_records').clone().appendTo('.customer_records_dynamic');
            $('.customer_records_dynamic .customer_records').addClass('single remove');
            $('.single .extra-fields-customer').remove();
            $('.single').append('<a href="#" class="remove-field ph-btn btn-remove-customer"><i class="fas fa-times"></i></a>');
            $('.customer_records_dynamic > .single').attr("class", "remove");

            $('.customer_records_dynamic input').each(function () {
                var count = 0;
                var fieldname = $(this).attr("name");
                $(this).attr('name', fieldname + count);
                count++;
            });

        });

        $(document).on('click', '.remove-field', function (e) {
            $(this).parent('.remove').remove();
            e.preventDefault();
        });
    </script>
    <script>
        function addNewRow() {
            var template = $('tr.template_row:first');
            $('.no_entries_row').css('display', 'none');
            var newRow = template.clone();
            var lastRow = $('tr.template_row:last').after(newRow);

            $('.list_cancel').on('click', function (event) {
                event.stopPropagation();
                event.stopImmediatePropagation();
                $(this).closest('tr').remove();
                if ($('.list_cancel').length === 1) {
                    $('.no_entries_row').css('display', 'none');
                }
                console.log($('.list_cancel').length)
            });
            console.log($('.list_cancel').length)
            $('select.label').on('change', function (event) {
                event.stopPropagation();
                event.stopImmediatePropagation();
                $(this).css('background-color', $(this).val());

            })

        }

        $('a.list_add').on('click', addNewRow);

    </script>
    <script>
        $(".imgAdd").click(function () {
            $(this).closest(".row").find('.imgAdd').before('<div class="col-3 col-md-2 imgUp"><div class="imagePreview"></div><label><input id="image-name-3" class="image-name-3" type="text" readonly></label><label class="btn ph-spm-create-product-img-up-btn">آپلود<input type="file" class="uploadFile img upload-btn-3" value="Upload Photo" style="width:0px;height:0px;overflow:hidden;" id="upload-btn-3"></label><i class="fa fa-times del"></i></div>');
        });
        $(document).on("click", "i.del", function () {
            $(this).parent().remove();
        });
        $(function () {
            $(document).on("change", ".uploadFile", function () {
                var uploadFile = $(this);
                var files = !!this.files ? this.files : [];
                if (!files.length || !window.FileReader) return;

                if (/^image/.test(files[0].type)) {
                    var reader = new FileReader();
                    reader.readAsDataURL(files[0]);

                    reader.onloadend = function () {
                        uploadFile.closest(".imgUp").find('.imagePreview').css("background-image", "url(" + this.result + ")");
                    }
                }

            });
        });
        $(document).on('change', '.upload-btn-3', function () {
            $(this).parent().parent().find('.image-name-3').val(this.files && this.files.length ? this.files[0].name.split('.')[0] : '');
        });
    </script>
{% endblock %}